"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[9080],{2285(e,n,d){d.r(n),d.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>a,frontMatter:()=>t,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"api-reference/utils","title":"Utilities API","description":"Helper Tools for Data & Paths","source":"@site/versioned_docs/version-0.1.0/api-reference/utils.md","sourceDirName":"api-reference","slug":"/api-reference/utils","permalink":"/loom/api-reference/utils","draft":false,"unlisted":false,"editUrl":"https://github.com/leonieziechmann/loom/tree/main/docs/versioned_docs/version-0.1.0/api-reference/utils.md","tags":[],"version":"0.1.0","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Matcher API","permalink":"/loom/api-reference/matcher"},"next":{"title":"Contributing to Loom","permalink":"/loom/contributing"}}');var i=d(4848),c=d(8453);const t={sidebar_position:8},s="Utilities API",l={},h=[{value:"Module: <code>loom.collection</code>",id:"module-loomcollection",level:2},{value:"<code>get</code>",id:"get",level:3},{value:"<code>map</code>",id:"map",level:3},{value:"<code>merge-deep</code>",id:"merge-deep",level:3},{value:"<code>omit</code>",id:"omit",level:3},{value:"<code>pick</code>",id:"pick",level:3},{value:"<code>compact</code>",id:"compact",level:3},{value:"Module: <code>loom.path</code>",id:"module-loompath",level:2},{value:"<code>get</code>",id:"get-1",level:3},{value:"<code>to-string</code>",id:"to-string",level:3},{value:"<code>contains</code>",id:"contains",level:3},{value:"<code>parent</code>",id:"parent",level:3},{value:"<code>parent-kind</code>",id:"parent-kind",level:3},{value:"<code>parent-is</code>",id:"parent-is",level:3},{value:"<code>current</code>",id:"current",level:3},{value:"<code>current-kind</code>",id:"current-kind",level:3},{value:"<code>depth</code>",id:"depth",level:3}];function o(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"utilities-api",children:"Utilities API"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Helper Tools for Data & Paths"})}),"\n",(0,i.jsxs)(n.p,{children:["Loom exposes two utility modules: ",(0,i.jsx)(n.code,{children:"collection"})," (for data manipulation) and ",(0,i.jsx)(n.code,{children:"path"})," (for tree introspection). These are often used when building complex ",(0,i.jsx)(n.code,{children:"measure"})," logic."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"module-loomcollection",children:["Module: ",(0,i.jsx)(n.code,{children:"loom.collection"})]}),"\n",(0,i.jsxs)(n.p,{children:['Functional utilities for manipulating standard Typst dictionaries and arrays. These helpers are "safe" by default\u2014they tend to return ',(0,i.jsx)(n.code,{children:"none"})," or default values rather than panicking."]}),"\n",(0,i.jsx)(n.h3,{id:"get",children:(0,i.jsx)(n.code,{children:"get"})}),"\n",(0,i.jsx)(n.p,{children:"Safely retrieves a value from a nested structure of dictionaries and arrays."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"collection.get(root, ..path, req-type: none, default: none) -> any\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"root"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dictionary"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"array"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"required"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"..path"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"str"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"int"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"required"})})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"req-type"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"type"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"none"})}),(0,i.jsxs)(n.td,{children:["If provided, returns ",(0,i.jsx)(n.code,{children:"default"})," if the found value does not match this type."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"default"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"any"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"none"})}),(0,i.jsxs)(n.td,{children:["The value to return if the path is invalid or result is ",(0,i.jsx)(n.code,{children:"none"}),"."]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"map",children:(0,i.jsx)(n.code,{children:"map"})}),"\n",(0,i.jsxs)(n.p,{children:["Applies a function to a value ",(0,i.jsx)(n.em,{children:"only if"})," the value is not ",(0,i.jsx)(n.code,{children:"none"}),"."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"collection.map(value, fn, req-type: none) -> any\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"value"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"any"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"required"})}),(0,i.jsx)(n.td,{children:"The value to transform."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"fn"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"function"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"required"})}),(0,i.jsxs)(n.td,{children:["The transformation function ",(0,i.jsx)(n.code,{children:"v => new_v"}),"."]})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"req-type"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"type"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"none"})}),(0,i.jsxs)(n.td,{children:["If provided, returns ",(0,i.jsx)(n.code,{children:"none"})," if ",(0,i.jsx)(n.code,{children:"value"})," does not match this type."]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"merge-deep",children:(0,i.jsx)(n.code,{children:"merge-deep"})}),"\n",(0,i.jsxs)(n.p,{children:["Recursively merges two dictionaries. Unlike standard Typst ",(0,i.jsx)(n.code,{children:"+"}),", this preserves nested keys in the ",(0,i.jsx)(n.code,{children:"base"})," dictionary instead of overwriting the entire sub-dictionary."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"collection.merge-deep(base, override) -> dictionary\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"base"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dictionary"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"required"})}),(0,i.jsx)(n.td,{children:"The original dictionary (e.g., default config)."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"override"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dictionary"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"required"})}),(0,i.jsx)(n.td,{children:"The dictionary with updates (e.g., user config)."})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"omit",children:(0,i.jsx)(n.code,{children:"omit"})}),"\n",(0,i.jsx)(n.p,{children:"Creates a new dictionary with specific keys removed."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"collection.omit(dict, ..keys) -> dictionary\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dict"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dictionary"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"required"})}),(0,i.jsx)(n.td,{children:"The source dictionary."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"..keys"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"str"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"required"})}),(0,i.jsx)(n.td,{children:"The keys to exclude."})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"pick",children:(0,i.jsx)(n.code,{children:"pick"})}),"\n",(0,i.jsxs)(n.p,{children:["Creates a new dictionary containing ",(0,i.jsx)(n.em,{children:"only"})," the specified keys. Keys not present in the source are ignored."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"collection.pick(dict, ..keys) -> dictionary\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dict"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dictionary"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"required"})}),(0,i.jsx)(n.td,{children:"The source dictionary."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"..keys"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"str"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"required"})}),(0,i.jsx)(n.td,{children:"The keys to keep."})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"compact",children:(0,i.jsx)(n.code,{children:"compact"})}),"\n",(0,i.jsxs)(n.p,{children:["Removes all ",(0,i.jsx)(n.code,{children:"none"})," values from an array or dictionary."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"collection.compact(collection) -> array | dictionary\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"module-loompath",children:["Module: ",(0,i.jsx)(n.code,{children:"loom.path"})]}),"\n",(0,i.jsxs)(n.p,{children:["Utilities for inspecting the component hierarchy. These functions read the ",(0,i.jsx)(n.strong,{children:"System Path"})," stored in the Context (",(0,i.jsx)(n.code,{children:"ctx"}),")."]}),"\n",(0,i.jsx)(n.h3,{id:"get-1",children:(0,i.jsx)(n.code,{children:"get"})}),"\n",(0,i.jsx)(n.p,{children:"Retrieves the raw path array."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"path.get(ctx) -> array<(str, int)>\n"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," An array of tuples, e.g., ",(0,i.jsx)(n.code,{children:'( ("root", 0), ("section", 2) )'}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"to-string",children:(0,i.jsx)(n.code,{children:"to-string"})}),"\n",(0,i.jsx)(n.p,{children:"Serializes the path into a unique string identifier."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:'path.to-string(ctx, separator: ">") -> str\n'})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Returns:"})," A string like ",(0,i.jsx)(n.code,{children:'"root(0)>section(2)>div(1)"'}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"contains",children:(0,i.jsx)(n.code,{children:"contains"})}),"\n",(0,i.jsx)(n.p,{children:"Checks if the current path contains specific component kinds."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"path.contains(ctx, ..kinds, include-current: true) -> bool\n"})}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Parameter"}),(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Default"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ctx"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"dictionary"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"required"})}),(0,i.jsx)(n.td,{children:"The current context."})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"..kinds"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"str"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.em,{children:"required"})}),(0,i.jsx)(n.td,{children:'One or more kinds to check for (e.g., "project").'})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"include-current"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"bool"})}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"true"})}),(0,i.jsxs)(n.td,{children:["If ",(0,i.jsx)(n.code,{children:"false"}),", checks only ancestors (parents), ignoring the component itself."]})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"parent",children:(0,i.jsx)(n.code,{children:"parent"})}),"\n",(0,i.jsxs)(n.p,{children:["Retrieves the full tuple ",(0,i.jsx)(n.code,{children:"(kind, id)"})," of the immediate parent."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"path.parent(ctx) -> (str, int) | none\n"})}),"\n",(0,i.jsx)(n.h3,{id:"parent-kind",children:(0,i.jsx)(n.code,{children:"parent-kind"})}),"\n",(0,i.jsx)(n.p,{children:'Retrieves just the "kind" string of the immediate parent.'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"path.parent-kind(ctx) -> str | none\n"})}),"\n",(0,i.jsx)(n.h3,{id:"parent-is",children:(0,i.jsx)(n.code,{children:"parent-is"})}),"\n",(0,i.jsx)(n.p,{children:"Checks if the immediate parent matches one of the provided kinds."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"path.parent-is(ctx, ..kinds) -> bool\n"})}),"\n",(0,i.jsx)(n.h3,{id:"current",children:(0,i.jsx)(n.code,{children:"current"})}),"\n",(0,i.jsxs)(n.p,{children:["Retrieves the full tuple ",(0,i.jsx)(n.code,{children:"(kind, id)"})," of the current component (the tip of the path)."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"path.current(ctx) -> (str, int) | none\n"})}),"\n",(0,i.jsx)(n.h3,{id:"current-kind",children:(0,i.jsx)(n.code,{children:"current-kind"})}),"\n",(0,i.jsx)(n.p,{children:'Retrieves just the "kind" string of the current component.'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"path.current-kind(ctx) -> str | none\n"})}),"\n",(0,i.jsx)(n.h3,{id:"depth",children:(0,i.jsx)(n.code,{children:"depth"})}),"\n",(0,i.jsx)(n.p,{children:"Returns the current nesting depth (length of the path)."}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"path.depth(ctx) -> int\n"})})]})}function a(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(o,{...e})}):o(e)}},8453(e,n,d){d.d(n,{R:()=>t,x:()=>s});var r=d(6540);const i={},c=r.createContext(i);function t(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);