"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[1459],{4580(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>a,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"contributing","title":"Contributing to Loom","description":"Help us weave the future of Typst.","source":"@site/docs/contributing.md","sourceDirName":".","slug":"/contributing","permalink":"/loom/canary/contributing","draft":false,"unlisted":false,"editUrl":"https://github.com/leonieziechmann/loom/tree/main/docs/docs/contributing.md","tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Utilities API","permalink":"/loom/canary/api-reference/utils"}}');var t=s(4848),r=s(8453);const o={sidebar_position:7},l="Contributing to Loom",c={},d=[{value:"Reporting Bugs",id:"reporting-bugs",level:2},{value:"Development Setup",id:"development-setup",level:2},{value:"Testing",id:"testing",level:2},{value:"Core Philosophy",id:"core-philosophy",level:2},{value:"Pull Request Process",id:"pull-request-process",level:2},{value:"Documentation",id:"documentation",level:2}];function h(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"contributing-to-loom",children:"Contributing to Loom"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Help us weave the future of Typst."})}),"\n",(0,t.jsxs)(n.p,{children:["First of all, thank you! Loom is an ambitious project trying to push the boundaries of what is possible in Typst. However, to maintain the quality and stability of the core library with limited maintainer bandwidth, ",(0,t.jsx)(n.strong,{children:"we adhere to very strict contribution guidelines."})]}),"\n",(0,t.jsxs)(n.p,{children:["Please read this document carefully. ",(0,t.jsx)(n.strong,{children:"Contributions that do not follow these rules will be closed without review."})]}),"\n",(0,t.jsx)(n.h2,{id:"reporting-bugs",children:"Reporting Bugs"}),"\n",(0,t.jsx)(n.p,{children:"Loom is complex. To save everyone time, we require a high standard for bug reports."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Strictly Minimal Reproductions:"})," You must provide a minimal code snippet that reproduces the error. If we cannot copy-paste your code and see the error immediately, the issue will be closed."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"No External Packages:"})," Issues must be reproduced using ",(0,t.jsx)(n.strong,{children:"only"})," ",(0,t.jsx)(n.code,{children:"loom"})," and standard Typst elements. We will ",(0,t.jsx)(n.strong,{children:"not"})," investigate issues caused by interactions with other packages (e.g., ",(0,t.jsx)(n.code,{children:"codly"}),", ",(0,t.jsx)(n.code,{children:"showybox"}),") unless you can prove the bug exists in Loom's core logic in isolation."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Check the logs:"})," Run your reproduction with ",(0,t.jsx)(n.code,{children:"debug: true"})," and include the output."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Version:"})," State clearly which version of Loom and Typst you are using."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Good Issue Title:"})," ",(0,t.jsxs)(n.em,{children:['"Infinite loop when nesting ',(0,t.jsx)(n.code,{children:"data-motif"})," inside ",(0,t.jsx)(n.code,{children:"table"}),' header"']}),"\n",(0,t.jsx)(n.strong,{children:"Bad Issue Title:"})," ",(0,t.jsx)(n.em,{children:'"My document doesn\'t compile"'})]}),"\n",(0,t.jsx)(n.h2,{id:"development-setup",children:"Development Setup"}),"\n",(0,t.jsxs)(n.p,{children:["We use ",(0,t.jsx)(n.strong,{children:"Nix"})," to manage our development environment and dependencies strictly. This ensures that every contributor uses the exact same version of Typst, the test runner, and the formatter."]}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Clone the repository:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"git clone https://github.com/leonieziechmann/loom.git\ncd loom\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Enter the Environment:"}),"\nYou must use the Nix flake to get the required tools (",(0,t.jsx)(n.code,{children:"tytanic"}),", ",(0,t.jsx)(n.code,{children:"typstyle"}),", ",(0,t.jsx)(n.code,{children:"pre-commit"}),", etc.)."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Option A (Recommended):"})," If you have ",(0,t.jsx)(n.code,{children:"nix direnv"})," installed:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"direnv allow\n"})}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Option B:"})," Using Nix directly:","\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"nix develop\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pre-commit Hooks:"}),"\nWe enforce strict code formatting using pre-commit hooks.\nThe environment handles this automatically, but you can verify it by running:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pre-commit run --all-files\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"PRs with styling errors will be rejected automatically."})}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"testing",children:"Testing"}),"\n",(0,t.jsxs)(n.p,{children:["We use ",(0,t.jsx)(n.strong,{children:(0,t.jsx)(n.a,{href:"https://github.com/typst-community/tytanic",children:"Tytanic"})})," for testing.\nNew features ",(0,t.jsx)(n.strong,{children:"must"})," include tests. PRs without tests will be closed."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Run the complete test suite\ntt run\n"})}),"\n",(0,t.jsx)(n.h2,{id:"core-philosophy",children:"Core Philosophy"}),"\n",(0,t.jsx)(n.p,{children:"When contributing code, adhere to these principles. Code that violates them will be rejected."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Defensive Programming:"}),"\nLoom runs in a hostile environment. Assume the user will pass ",(0,t.jsx)(n.code,{children:"none"}),", invalid keys, or try to nest things incorrectly."]}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.em,{children:"Always"})," provide helpful error messages using ",(0,t.jsx)(n.code,{children:"assert"})," or ",(0,t.jsx)(n.code,{children:"panic"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{start:"2",children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Performance First:"}),'\nEvery function in the "hot path" is executed thousands of times.']}),"\n"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Avoid deep copies of Context."}),"\n",(0,t.jsx)(n.li,{children:"Avoid unnecessary loop allocations."}),"\n"]}),"\n",(0,t.jsxs)(n.ol,{start:"3",children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Backward Compatibility:"}),"\nDo not break the public API."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"pull-request-process",children:"Pull Request Process"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Fork"})," the repo and create your branch from ",(0,t.jsx)(n.code,{children:"main"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Add Tests"})," covering your changes."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Format"})," your code. The pre-commit hooks enforce ",(0,t.jsx)(n.strong,{children:"Typstyle"})," for ",(0,t.jsx)(n.code,{children:".typ"})," files and ",(0,t.jsx)(n.strong,{children:"Prettier"})," for Markdown."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Submit"})," the PR."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Note:"})," If your PR fails the CI checks (formatting or tests), do not expect a review until they are fixed."]}),"\n",(0,t.jsx)(n.h2,{id:"documentation",children:"Documentation"}),"\n",(0,t.jsx)(n.p,{children:"Documentation is required for new features. The Nix environment provides the Node.js runtime needed for Docusaurus."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"cd docs\nnpm install\nnpm start\n"})})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453(e,n,s){s.d(n,{R:()=>o,x:()=>l});var i=s(6540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);