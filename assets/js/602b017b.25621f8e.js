"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[9343],{7468(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"getting-started/first-component","title":"Your First Component","description":"From Functions to Motifs","source":"@site/docs/getting-started/first-component.md","sourceDirName":"getting-started","slug":"/getting-started/first-component","permalink":"/loom/getting-started/first-component","draft":false,"unlisted":false,"editUrl":"https://github.com/leonieziechmann/loom/tree/main/docs/docs/getting-started/first-component.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Installation","permalink":"/loom/getting-started/installation"},"next":{"title":"Core Concepts","permalink":"/loom/concepts/"}}');var i=t(4848),s=t(8453);const r={sidebar_position:2},l="Your First Component",c={},a=[{value:"The Goal",id:"the-goal",level:2},{value:"1. The Blueprint",id:"1-the-blueprint",level:2},{value:"Understanding the Signature",id:"understanding-the-signature",level:3},{value:"2. Using the Component",id:"2-using-the-component",level:2},{value:"3. Adding Props (Arguments)",id:"3-adding-props-arguments",level:2},{value:"Summary",id:"summary",level:2},{value:"Why not just use a normal function?",id:"why-not-just-use-a-normal-function",level:3}];function d(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"your-first-component",children:"Your First Component"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"From Functions to Motifs"})}),"\n",(0,i.jsxs)(n.p,{children:["In standard Typst, you create reusable UI elements using ",(0,i.jsx)(n.strong,{children:"functions"}),".\nIn Loom, you create them using ",(0,i.jsx)(n.strong,{children:"Motifs"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"A Motif is just a function wrapped in a special container that allows it to participate in the reactive Weave Loop."}),"\n",(0,i.jsx)(n.h2,{id:"the-goal",children:"The Goal"}),"\n",(0,i.jsxs)(n.p,{children:["We will build a simple ",(0,i.jsx)(n.strong,{children:"Note Box"})," component that:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Accepts a title."}),"\n",(0,i.jsx)(n.li,{children:"Wraps its content in a styled block."}),"\n",(0,i.jsx)(n.li,{children:"Is reactive (though we won't use the reactivity just yet!)."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"1-the-blueprint",children:"1. The Blueprint"}),"\n",(0,i.jsxs)(n.p,{children:["Open your ",(0,i.jsx)(n.code,{children:"main.typ"})," file. Ensure you have imported your wrapper as described in the ",(0,i.jsx)(n.a,{href:"https://www.google.com/search?q=./installation",children:"Installation"})," guide."]}),"\n",(0,i.jsxs)(n.p,{children:["To define a visual component, we use the ",(0,i.jsx)(n.code,{children:"content-motif"})," constructor. This is the simplest type of Motif\u2014it just takes a ",(0,i.jsx)(n.code,{children:"draw"})," function."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:"#import \"loom-wrapper.typ\": *\n\n// Define the component\n#let note(title, body) = content-motif(\n  // The 'draw' phase determines how the component looks.\n  draw: (ctx, body) => {\n    block(\n      fill: luma(240),\n      stroke: (left: 4pt + blue),\n      inset: 1em,\n      width: 100%\n    )[\n      *#title* \\\n      #body\n    ]\n  }\n)\n"})}),"\n",(0,i.jsx)(n.h3,{id:"understanding-the-signature",children:"Understanding the Signature"}),"\n",(0,i.jsxs)(n.p,{children:["Look at the ",(0,i.jsx)(n.code,{children:"draw"})," function: ",(0,i.jsx)(n.code,{children:"(ctx, body) => ..."}),"."]}),"\n",(0,i.jsx)(n.admonition,{title:"The Magic Backpack",type:"info",children:(0,i.jsxs)(n.p,{children:["The ",(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"ctx"})," (Context)"]})," parameter is available in almost every Loom lifecycle function. It contains all global state, theme configuration, and parent data. Even if you don't use it now, it's the bridge that connects your component to the rest of the system."]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"ctx"}),":"]})," The context dictionary."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:[(0,i.jsx)(n.code,{children:"body"}),":"]})," This is the content the user puts inside the square brackets ",(0,i.jsx)(n.code,{children:"[...]"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"2-using-the-component",children:"2. Using the Component"}),"\n",(0,i.jsx)(n.p,{children:"You use a Motif exactly like a standard Typst function."}),"\n",(0,i.jsx)(n.admonition,{title:"Critical Step",type:"danger",children:(0,i.jsxs)(n.p,{children:["You ",(0,i.jsx)(n.strong,{children:"must"})," initialize the Loom engine at the start of your document using ",(0,i.jsx)(n.code,{children:"#show: weave.with()"}),". If you skip this, your components will not render!"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:'// Start the engine (Required!)\n#show: weave.with()\n\n// Use your component\n#note("Tip")[\n  Loom components look just like normal Typst functions,\n  but they are much more powerful under the hood.\n]\n\n#note("Warning")[\n  Always remember to initialize the engine!\n]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"3-adding-props-arguments",children:"3. Adding Props (Arguments)"}),"\n",(0,i.jsxs)(n.p,{children:["Because ",(0,i.jsx)(n.code,{children:"content-motif"})," returns a standard Typst function, you can add as many arguments as you like."]}),"\n",(0,i.jsxs)(n.p,{children:["Let's add a ",(0,i.jsx)(n.code,{children:"color"})," argument with a default value."]}),"\n",(0,i.jsx)(n.admonition,{title:"Closure Capturing",type:"note",children:(0,i.jsxs)(n.p,{children:["Notice that the ",(0,i.jsx)(n.code,{children:"draw"})," function doesn't need ",(0,i.jsx)(n.code,{children:"title"})," or ",(0,i.jsx)(n.code,{children:"color"})," passed to it explicitly. Because ",(0,i.jsx)(n.code,{children:"draw"})," is defined ",(0,i.jsx)(n.em,{children:"inside"})," the ",(0,i.jsx)(n.code,{children:"note"})," function, it automatically captures those variables from the parent scope."]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-typ",children:'#let note(title, color: blue, body) = content-motif(\n  draw: (ctx, body) => {\n    block(\n      fill: color.lighten(90%),\n      stroke: (left: 4pt + color),\n      inset: 1em\n    )[\n      #text(fill: color, weight: "bold")[#title] \\\n      #body\n    ]\n  }\n)\n\n// Usage\n#note("Success", color: green)[System is operational.]\n#note("Error", color: red)[Connection failed.]\n'})}),"\n",(0,i.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"content-motif"})})," is the tool for building visual components."]}),"\n",(0,i.jsxs)(n.li,{children:["The ",(0,i.jsx)(n.strong,{children:(0,i.jsx)(n.code,{children:"draw"})})," function receives the ",(0,i.jsx)(n.code,{children:"ctx"})," and the ",(0,i.jsx)(n.code,{children:"body"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["You pass arguments (props) to the wrapper function, and they are available inside ",(0,i.jsx)(n.code,{children:"draw"})," via closure capturing."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h3,{id:"why-not-just-use-a-normal-function",children:"Why not just use a normal function?"}),"\n",(0,i.jsxs)(n.p,{children:["You might be thinking: ",(0,i.jsxs)(n.em,{children:['"I could have done this with a normal ',(0,i.jsx)(n.code,{children:"#let"}),' function in 3 lines of code. Why the extra wrapper?"']})]}),"\n",(0,i.jsxs)(n.p,{children:["If you only care about styling, a normal function is fine! But by wrapping it in ",(0,i.jsx)(n.code,{children:"content-motif"}),", you unlock Loom's superpowers."]}),"\n",(0,i.jsxs)(n.admonition,{title:"The Loom Advantage",type:"tip",children:[(0,i.jsx)(n.p,{children:"By using a Motif, your simple note box gains capabilities that standard functions lack:"}),(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Context Access:"})," It can automatically read ",(0,i.jsx)(n.code,{children:"ctx.theme-color"})," without you passing it down manually."]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Signals:"}),' It could emit a signal saying "I am a Warning", allowing a parent component to count how many warnings exist in the document.']}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Guards:"}),' You could enforce structural rules, such as "Error notes can only appear inside the Appendix".']}),"\n"]})]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>r,x:()=>l});var o=t(6540);const i={},s=o.createContext(i);function r(e){const n=o.useContext(s);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),o.createElement(s.Provider,{value:n},e.children)}}}]);