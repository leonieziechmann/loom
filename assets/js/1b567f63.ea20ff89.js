"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[7813],{1559(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"showcase/character-sheet","title":"The Reactive Character Sheet","description":"Pattern: Portals & Context-Aware Logic","source":"@site/versioned_docs/version-0.1.0/showcase/character-sheet.md","sourceDirName":"showcase","slug":"/showcase/character-sheet","permalink":"/loom/showcase/character-sheet","draft":false,"unlisted":false,"editUrl":"https://github.com/leonieziechmann/loom/tree/main/docs/versioned_docs/version-0.1.0/showcase/character-sheet.md","tags":[],"version":"0.1.0","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"The Auto-Scaling Cookbook","permalink":"/loom/showcase/recipe-book"},"next":{"title":"Advanced Guides","permalink":"/loom/category/advanced-guides"}}');var s=n(4848),a=n(8453);const r={sidebar_position:2},i="The Reactive Character Sheet",l={},c=[{value:"The Challenge",id:"the-challenge",level:2},{value:"The Loom Solution",id:"the-loom-solution",level:2},{value:"1. The User Experience (API)",id:"1-the-user-experience-api",level:2},{value:"2. The Portal Pattern (Layout Teleportation)",id:"2-the-portal-pattern-layout-teleportation",level:2},{value:"3. The Smart Component (Logic &amp; Adaptability)",id:"3-the-smart-component-logic--adaptability",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2}];function d(e){const t={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"the-reactive-character-sheet",children:"The Reactive Character Sheet"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Pattern: Portals & Context-Aware Logic"})}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.a,{href:"https://github.com/leonieziechmann/loom/tree/main/showcase/character-sheet",children:"View Source Code"})}),"\n",(0,s.jsx)(t.p,{children:'This showcase demonstrates how Loom can manage complex game rules and non-linear layouts. We will build a D&D 5e Character Sheet where stats calculate their own modifiers, and content acts as "Portals," teleporting from the text flow into specific layout slots (like a sidebar).'}),"\n",(0,s.jsx)("div",{style:{textAlign:"center"},children:(0,s.jsx)("img",{src:n(8429).A,alt:"Result of the Character Sheet",style:{width:"80%",border:"1px solid #e5e7eb",borderRadius:"8px",boxShadow:"0 4px 6px -1px rgb(0 0 0 / 0.1)"}})}),"\n",(0,s.jsx)(t.h2,{id:"the-challenge",children:"The Challenge"}),"\n",(0,s.jsx)(t.p,{children:"In standard Typst, creating this document is difficult because:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Linearity:"})," You cannot define sidebar content ",(0,s.jsx)(t.em,{children:"inside"})," your main story text and expect it to jump to the left column."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Logic Separation:"})," Calculating a modifier (e.g., Score 16 -> +3) usually requires mixing functions into your content."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"responsiveness:"})," You want the ",(0,s.jsx)(t.em,{children:"same"})," component to look different if it's in a wide body vs. a narrow sidebar."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"the-loom-solution",children:"The Loom Solution"}),"\n",(0,s.jsx)(t.p,{children:"We use two advanced Loom patterns:"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Portals (Teleportation):"})," A ",(0,s.jsx)(t.code,{children:"portal"})," component signals its content up to the root, which then ",(0,s.jsx)(t.code,{children:"connects"}),' it to a specific grid cell (e.g., "sidebar").']}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Smart Components (Logic):"})," The ",(0,s.jsx)(t.code,{children:"hero-stats"})," component manages its own math. It reads global context (proficiencies) and calculates derived stats (modifiers) automatically."]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"1-the-user-experience-api",children:"1. The User Experience (API)"}),"\n",(0,s.jsxs)(t.p,{children:["The user focuses purely on data and storytelling. Notice how the ",(0,s.jsx)(t.code,{children:"#sidebar"})," content is written inline with the story but renders in the left column."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typ",children:'// my-character.typ\n#import "character-sheet.typ": *\n\n#show: character-sheet.with(\n  name: "Leonie",\n  class: "Paladin",\n  level: 5,\n  prof-bonus: 3 // Global Context\n)\n\n// This content "teleports" to the sidebar!\n#sidebar[\n  #hero-stats(\n    stats: (str: 16, dex: 12, con: 14, int: 10, wis: 13, cha: 15),\n    proficiencies: ("wis", "cha")\n  )\n\n  #features({\n    feature("Aura of Protection")[+2 buff for allies within 3m.]\n  })\n]\n\n== Story & Notes\n_#lorem(8)_\n#lorem(80)\n'})}),"\n",(0,s.jsx)(t.h2,{id:"2-the-portal-pattern-layout-teleportation",children:"2. The Portal Pattern (Layout Teleportation)"}),"\n",(0,s.jsxs)(t.p,{children:['The "Portal" allows us to break the linear flow. The ',(0,s.jsx)(t.code,{children:"character-sheet"})," layout defines specific slots (sidebar, bottom, body). The ",(0,s.jsx)(t.code,{children:"connect"})," motif collects all signals and places them into the correct grid cells."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typ",children:'// character-sheet-layout.typ\n#let connect(body) = lw-layout.motif(\n  measure: (_, child-data) => {\n    // 1. COLLECT: Gather all "portal" signals (sidebar, bottom)\n    let portals = loom.query.collect-signals(child-data, kind: "portal")\n\n    // 2. ORGANIZE: Return them as a dictionary\n    (none, portals)\n  },\n  draw: (_, _, view, body) => {\n    // 3. DISTRIBUTE: Place content in the grid\n    grid(\n      columns: (5cm, 1fr), // Sidebar | Body\n      gutter: 1em,\n\n      // Render the sidebar content collected from deep within the document\n      view.at("sidebar", default: []),\n\n      // Render the main body flow\n      body\n    )\n  },\n  body\n)\n\n// Helper to create a portal\n#let portal(target, body) = lw-layout.data-motif(\n  "portal",\n  measure: (..) => (target: target, body: body)\n)\n'})}),"\n",(0,s.jsx)(t.h2,{id:"3-the-smart-component-logic--adaptability",children:"3. The Smart Component (Logic & Adaptability)"}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.code,{children:"hero-stats"})," component is more than just a table. It is a calculator that adapts its visual style based on available space."]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-typ",children:'// components/adaptive-stats.typ\n#let hero-stats(stats: (:), proficiencies: ()) = managed-motif(\n  "hero-stats",\n\n  // A. MATH PHASE\n  measure: (ctx, _) => {\n    // 1. Calculate Modifiers (Logic)\n    // Score 16 -> +3 Modifier\n    let calculated-stats = stats.pairs().map(((stat, score)) => {\n      let mod = rules.score-to-mod(score)\n      let is-proficient = stat in proficiencies\n\n      // Read global context (prof-bonus) injected by the root\n      let save = mod + if is-proficient { ctx.prof-bonus } else { 0 }\n\n      (stat, (score: score, mod: mod, save: save))\n    }).to-dict()\n\n    (none, calculated-stats)\n  },\n\n  // B. DRAW PHASE\n  draw: (ctx, _, view, _) => {\n    layout(size => {\n      // 2. Responsive Switching\n      // If narrow (Sidebar), use a list. If wide (Body), use a grid.\n      if size.width < 10cm {\n        render-compact-list(view)\n      } else {\n        render-wide-grid(view)\n      }\n    })\n  },\n  none\n)\n'})}),"\n",(0,s.jsx)(t.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Teleportation:"})," Use the ",(0,s.jsx)(t.strong,{children:"Portal Pattern"})," to move content from the linear flow into headers, footers, or sidebars without forcing the user to split their code."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Encapsulated Logic:"})," Components like ",(0,s.jsx)(t.code,{children:"hero-stats"})," handle the math (",(0,s.jsx)(t.code,{children:"16 -> +3"}),"). The user provides raw data; the component provides the rules."]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Context Awareness:"})," Components can read global state (like ",(0,s.jsx)(t.code,{children:"prof-bonus"})," or ",(0,s.jsx)(t.code,{children:"level"}),") provided by the root wrapper to adjust their calculations automatically."]}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8429(e,t,n){n.d(t,{A:()=>o});const o=n.p+"assets/images/character-sheet-document-4cb22fd0c01c7ae77bb8445880f2bc96.png"},8453(e,t,n){n.d(t,{R:()=>r,x:()=>i});var o=n(6540);const s={},a=o.createContext(s);function r(e){const t=o.useContext(a);return o.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(a.Provider,{value:t},e.children)}}}]);