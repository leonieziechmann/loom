"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[343],{7468(n,e,t){t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"getting-started/first-component","title":"Your First Component","description":"From Functions to Motifs","source":"@site/docs/getting-started/first-component.md","sourceDirName":"getting-started","slug":"/getting-started/first-component","permalink":"/loom/getting-started/first-component","draft":false,"unlisted":false,"editUrl":"https://github.com/leonieziechmann/loom/tree/main/docs/getting-started/first-component.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Installation","permalink":"/loom/getting-started/installation"},"next":{"title":"Core Concepts","permalink":"/loom/concepts/"}}');var i=t(4848),s=t(8453);const r={sidebar_position:2},l="Your First Component",a={},c=[{value:"The Goal",id:"the-goal",level:2},{value:"1. The Blueprint",id:"1-the-blueprint",level:2},{value:"Understanding the Signature",id:"understanding-the-signature",level:3},{value:"2. Using the Component",id:"2-using-the-component",level:2},{value:"3. Adding Props (Arguments)",id:"3-adding-props-arguments",level:2},{value:"Summary",id:"summary",level:2},{value:"Why not just use a normal function?",id:"why-not-just-use-a-normal-function",level:3}];function d(n){const e={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.header,{children:(0,i.jsx)(e.h1,{id:"your-first-component",children:"Your First Component"})}),"\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"From Functions to Motifs"})}),"\n",(0,i.jsxs)(e.p,{children:["In standard Typst, you create reusable UI elements using ",(0,i.jsx)(e.strong,{children:"functions"}),".\nIn Loom, you create them using ",(0,i.jsx)(e.strong,{children:"Motifs"}),"."]}),"\n",(0,i.jsx)(e.p,{children:"A Motif is just a function wrapped in a special container that allows it to participate in the reactive Weave Loop."}),"\n",(0,i.jsx)(e.h2,{id:"the-goal",children:"The Goal"}),"\n",(0,i.jsxs)(e.p,{children:["We will build a simple ",(0,i.jsx)(e.strong,{children:"Note Box"})," component that:"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsx)(e.li,{children:"Accepts a title."}),"\n",(0,i.jsx)(e.li,{children:"Wraps its content in a styled block."}),"\n",(0,i.jsx)(e.li,{children:"Is reactive (though we won't use the reactivity just yet!)."}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"1-the-blueprint",children:"1. The Blueprint"}),"\n",(0,i.jsxs)(e.p,{children:["Open your ",(0,i.jsx)(e.code,{children:"main.typ"})," file. Ensure you have imported your wrapper as described in the ",(0,i.jsx)(e.a,{href:"./installation",children:"Installation"})," guide."]}),"\n",(0,i.jsxs)(e.p,{children:["To define a visual component, we use the ",(0,i.jsx)(e.code,{children:"content-motif"})," constructor. This is the simplest type of Motif\u2014it just takes a ",(0,i.jsx)(e.code,{children:"draw"})," function."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-typ",children:"#import \"loom-wrapper.typ\": *\n\n// Define the component\n#let note(title, body) = content-motif(\n  // The 'draw' phase determines how the component looks.\n  draw: (ctx, body) => {\n    block(\n      fill: luma(240),\n      stroke: (left: 4pt + blue),\n      inset: 1em,\n      width: 100%\n    )[\n      *#title* \\\n      #body\n    ]\n  }\n)\n"})}),"\n",(0,i.jsx)(e.h3,{id:"understanding-the-signature",children:"Understanding the Signature"}),"\n",(0,i.jsxs)(e.p,{children:["Look at the ",(0,i.jsx)(e.code,{children:"draw"})," function: ",(0,i.jsx)(e.code,{children:"(ctx, body) => ..."}),"."]}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.strong,{children:[(0,i.jsx)(e.code,{children:"ctx"})," (Context):"]})," This is the \"Magic Backpack\" containing all global state, theme configuration, and parent data. We aren't using it yet, but it's always there."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsxs)(e.strong,{children:[(0,i.jsx)(e.code,{children:"body"}),":"]})," This is the content the user puts inside the square brackets ",(0,i.jsx)(e.code,{children:"[...]"}),"."]}),"\n"]}),"\n",(0,i.jsx)(e.h2,{id:"2-using-the-component",children:"2. Using the Component"}),"\n",(0,i.jsx)(e.p,{children:"You use a Motif exactly like a standard Typst function."}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-typ",children:'// Start the engine (Required!)\n#show: weave.with()\n\n// Use your component\n#note("Tip")[\n  Loom components look just like normal Typst functions,\n  but they are much more powerful under the hood.\n]\n\n#note("Warning")[\n  Always remember to initialize the engine with `#show: weave.with()`,\n  otherwise your motifs will print generic object representations!\n]\n\n'})}),"\n",(0,i.jsx)(e.h2,{id:"3-adding-props-arguments",children:"3. Adding Props (Arguments)"}),"\n",(0,i.jsxs)(e.p,{children:["Because ",(0,i.jsx)(e.code,{children:"content-motif"})," returns a standard Typst function, you can add as many arguments as you like."]}),"\n",(0,i.jsxs)(e.p,{children:["Let's add a ",(0,i.jsx)(e.code,{children:"color"})," argument with a default value."]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-typ",children:'#let note(title, color: blue, body) = content-motif(\n  draw: (ctx, body) => {\n    block(\n      fill: color.lighten(90%),\n      stroke: (left: 4pt + color),\n      inset: 1em\n    )[\n      #text(fill: color, weight: "bold")[#title] \\\n      #body\n    ]\n  }\n)\n\n// Usage\n#note("Success", color: green)[System is operational.]\n#note("Error", color: red)[Connection failed.]\n\n'})}),"\n",(0,i.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.code,{children:"content-motif"})})," is the tool for building visual components."]}),"\n",(0,i.jsxs)(e.li,{children:["The ",(0,i.jsx)(e.strong,{children:(0,i.jsx)(e.code,{children:"draw"})})," function receives the ",(0,i.jsx)(e.code,{children:"ctx"})," and the ",(0,i.jsx)(e.code,{children:"body"}),"."]}),"\n",(0,i.jsxs)(e.li,{children:["You pass arguments (props) to the wrapper function, and they are available inside ",(0,i.jsx)(e.code,{children:"draw"})," via closure capturing."]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h3,{id:"why-not-just-use-a-normal-function",children:"Why not just use a normal function?"}),"\n",(0,i.jsxs)(e.p,{children:["You might be thinking: ",(0,i.jsxs)(e.em,{children:['"I could have done this with a normal ',(0,i.jsx)(e.code,{children:"#let"}),' function in 3 lines of code. Why the extra wrapper?"']})]}),"\n",(0,i.jsxs)(e.p,{children:["If you only care about styling, a normal function is fine!\nBut by wrapping it in ",(0,i.jsx)(e.code,{children:"content-motif"}),", you unlock Loom's superpowers:"]}),"\n",(0,i.jsxs)(e.ol,{children:["\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Context Access:"})," Your note could automatically read ",(0,i.jsx)(e.code,{children:"ctx.theme-color"})," without you passing it."]}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Signals:"}),' Your note could emit a signal saying "I am a Warning", and a parent could count how many warnings are on the page.']}),"\n",(0,i.jsxs)(e.li,{children:[(0,i.jsx)(e.strong,{children:"Guards:"}),' You could enforce that "Error" notes only appear in the "Appendix".']}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(d,{...n})}):d(n)}},8453(n,e,t){t.d(e,{R:()=>r,x:()=>l});var o=t(6540);const i={},s=o.createContext(i);function r(n){const e=o.useContext(s);return o.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:r(n.components),o.createElement(s.Provider,{value:e},n.children)}}}]);