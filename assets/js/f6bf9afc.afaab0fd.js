"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[5716],{4443(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>a});const t=JSON.parse('{"id":"advanced/debugging","title":"Debugging & Troubleshooting","description":"Tools for When Things Go Wrong","source":"@site/docs/advanced/debugging.md","sourceDirName":"advanced","slug":"/advanced/debugging","permalink":"/loom/advanced/debugging","draft":false,"unlisted":false,"editUrl":"https://github.com/leonieziechmann/loom/tree/main/docs/advanced/debugging.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Limitations & Constraints","permalink":"/loom/advanced/limitations"},"next":{"title":"API Reference","permalink":"/loom/api-reference/"}}');var r=i(4848),s=i(8453);const o={},l="Debugging & Troubleshooting",c={},a=[{value:"1. The Debug Flag",id:"1-the-debug-flag",level:2},{value:"2. Visual Inspection (<code>debug-motif</code>)",id:"2-visual-inspection-debug-motif",level:2},{value:"3. Common Errors &amp; Fixes",id:"3-common-errors--fixes",level:2},{value:"The #1 Error: Missing Data",id:"the-1-error-missing-data",level:3},{value:"4. Best Practices: &quot;Build &amp; Check&quot;",id:"4-best-practices-build--check",level:2}];function d(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"debugging--troubleshooting",children:"Debugging & Troubleshooting"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Tools for When Things Go Wrong"})}),"\n",(0,r.jsx)(n.p,{children:"Because Loom runs logic invisibly in the background, it can be hard to see why a calculation is off.\nLoom provides specific tools to expose this hidden data."}),"\n",(0,r.jsx)(n.h2,{id:"1-the-debug-flag",children:"1. The Debug Flag"}),"\n",(0,r.jsx)(n.p,{children:"The primary way to inspect your application is to enable the debug mode in the engine."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typ",children:"#show: weave.with(debug: true)\n"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"How it works:"}),"\nSetting ",(0,r.jsx)(n.code,{children:"debug: true"})," injects a flag into the global ",(0,r.jsx)(n.strong,{children:"Context"}),".\nWhen components detect this flag, they alter their behavior to be more verbose. specifically, they attach their ",(0,r.jsx)(n.strong,{children:"Children's Data"})," to the signal frame."]}),"\n",(0,r.jsx)(n.p,{children:"This allows you to inspect exactly what data a parent is receiving from its children, which is usually where aggregation logic fails."}),"\n",(0,r.jsxs)(n.h2,{id:"2-visual-inspection-debug-motif",children:["2. Visual Inspection (",(0,r.jsx)(n.code,{children:"debug-motif"}),")"]}),"\n",(0,r.jsxs)(n.p,{children:["Loom ships with a pre-built component designed specifically for visual debugging: ",(0,r.jsx)(n.code,{children:"prebuild-motif.debug"}),"."]}),"\n",(0,r.jsx)(n.p,{children:'It is a "Transparent Wrapper". It does not change the layout or logic of your document, but it renders an overlay showing the data flowing through that specific part of the tree.'}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Usage:"}),"\nWrap any part of your code with it to see what's happening inside."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typ",children:'#import "loom-wrapper": prebuild-motif\n\n// Wrap your suspicious component\n#(prebuild-motif.debug)[\n  #my-complex-component(..)\n]\n'})}),"\n",(0,r.jsx)(n.p,{children:"This will print the signals and context data associated with that node directly into the document output, allowing you to verify:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\"Did the parent receive the 'price' signal?\""}),"\n",(0,r.jsx)(n.li,{children:"\"Is the 'theme' context variable correct here?\""}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"3-common-errors--fixes",children:"3. Common Errors & Fixes"}),"\n",(0,r.jsx)(n.p,{children:"Loom is built defensively. It tries to catch errors early with clear messages, but you can prevent them entirely by using the right tools."}),"\n",(0,r.jsx)(n.h3,{id:"the-1-error-missing-data",children:"The #1 Error: Missing Data"}),"\n",(0,r.jsx)(n.p,{children:"The most frequent crash happens when you try to read a key that doesn't exist."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Scenario:"})," You try to sum ",(0,r.jsx)(n.code,{children:"child.price"}),", but one child is a text node and has no ",(0,r.jsx)(n.code,{children:"price"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.em,{children:"Scenario:"})," You try to read ",(0,r.jsx)(n.code,{children:"ctx.theme"}),", but the Provider is missing."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"The Fix: Use Loom Utilities"}),"\nNever access raw dictionary keys manually if you are unsure. Use the standard modules which handle missing data gracefully:"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"For Signals:"})," Use ",(0,r.jsx)(n.code,{children:"loom.query"})," or ",(0,r.jsx)(n.code,{children:"loom.collection"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typ",children:"// \u274c Risky\nlet total = children.map(c => c.price).sum()\n\n// \u2705 Safe (Ignores children without 'price')\nlet total = loom.query.sum-signals(children, \"price\")\n"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"For Context:"})," Use ",(0,r.jsx)(n.code,{children:"loom.mutator"})," or defaults."]}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-typ",children:'// \u274c Risky\nlet color = ctx.theme.color\n\n// \u2705 Safe\nlet color = ctx.at("theme", default: (:)).at("color", default: black)\n'})}),"\n",(0,r.jsx)(n.h2,{id:"4-best-practices-build--check",children:'4. Best Practices: "Build & Check"'}),"\n",(0,r.jsx)(n.p,{children:"Because errors in a reactive system can propagate (Pass 1 error causes Pass 2 crash), debugging a large document is hard."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"The Golden Rule:"}),"\nImplement your components iteratively."]}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["Write the ",(0,r.jsx)(n.code,{children:"measure"})," function."]}),"\n",(0,r.jsxs)(n.li,{children:["Immediately wrap it in ",(0,r.jsx)(n.code,{children:"#prebuild-motif.debug[...]"})," to verify the signals are correct."]}),"\n",(0,r.jsx)(n.li,{children:"Only then write the aggregation logic in the parent."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"If you wait until the entire 50-page document is written to test your logic, you will have a hard time finding the broken link."})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>o,x:()=>l});var t=i(6540);const r={},s=t.createContext(r);function o(e){const n=t.useContext(s);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:n},e.children)}}}]);